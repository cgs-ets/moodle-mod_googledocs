{{!
    This file is part of Moodle - http://moodle.org/

    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.

    @package   mod_googledocs
    @copyright 2020 Veronica Bermegui
    @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
}}

{{!
    @template mod_googledocs/grouping_table

    Google docs grouping content template.

    Example context (json):
        {
            "file_details": {
            "owneremail": "vero.web.dev.practice@gmail.com",
            "docid": "1XDq7MQPRuAN6Niaoli_yzsWPXepx4V4ukKDSXF6XN6s",
            "instanceid": "37"
            },
            "groupings": [
                            {
                                "grouping_name": "Pares_Group",
                                "grouping_id": "1",
                                "fileicon": "<a target="_blank" id="shared_link_1" href="#"><img src="http://localhost/cgs/moodle/mod/googledocs/pix/spreadsheets.svg" class="link_icon" /></a>",
                                "sharing_status": "<div id="file_grouping"></div>",
                                "grouping_members": [
                                                        {
                                                            "groupid": "31",
                                                            "group_name": "Group 2",
                                                            "groupmembers": [
                                                              {
                                                                "picture": "<a href="http://localhost/cgs/moodle/user/view.php?id=28&amp;course=5"><img src="http://localhost/cgs/moodle/theme/image.php/boostcgs/core/1598839830/u/f2" class="userpicture defaultuserpic" width="35" height="35" alt="Picture of Jan Černý" title="Picture of Jan Černý" />Jan Černý</a>",
                                                                "fullname": "Jan Černý",
                                                                "status": "<div id="file_0"></div>",
                                                                "student-id": "28",
                                                                "student-email": "tool_generator_000013@example.com"
                                                               }
                                                            ]
                                                        }
                                                      ]
                            }
                           ]
        }
}}
<div class="container-fluid table-container">
  {{#file_details}}
  <table class="mod-googledocs-files-view  table-bordered table-lg overviewTable table table-hover groupingTable " data-parentFile-id= "{{docid}}"
    data-owner-email = "{{owneremail}}" data-instance-id = "{{instanceid}}">
        <thead class="thead-light">
            <tr>
                <th class="header ">Grouping </th>
                <th class="header ">Members</th>
            </tr>
        </thead>

            {{#groupings}}
                <tbody class = "table-striped grouping-groups" data-grouping-id="{{grouping_id}}">

                        <tr data-grouping-id = "{{grouping_id}}" data-grouping-name = "{{grouping_name}}">
                            <td class= "grouping_name_cell">{{grouping_name}}</td>
                            <td class="groups">

                              {{! Groups table starts }}
                               {{#grouping_members}}
                                    <table class="mod-googledocs-files-view  table-bordered table-lg overviewTable table table-hover" data-googledoc-id={{googledocid}}
                                         data-owner-email={{owneremail}} data-instance-id = "{{instanceid}}" data-group-id = "{{groupid}}" data-grouping-id ="{{grouping_id}}">
                                             <thead class="thead-light">
                                                 <tr>
                                                     <th class="header ">Group Name</th>
                                                     <th class="header">Link</th>
                                                     <th class="header">Status</th>
                                                 </tr>
                                             </thead>

                                             <tbody >
                                                     <tr id = "group_{{groupid}}"  aria-expanded="false"
                                                         aria-controls="group-members-{{groupid}}" data-group-name="{{group_name}}" data-group-id="{{groupid}}" >
                                                         <td class="group-name-column clickable" data-toggle="collapse"  href="#group-members-{{groupid}}">
                                                             <span data-toggle="tooltip" title="Click to see Members">{{group_name}}<span>
                                                         </td>
                                                         <td id="shared-link-group-id-{{groupid}}"class="status-link-column">{{{fileicon}}}</td>
                                                         <td  class="status-link-column">{{{sharing_status}}}</td>
                                                     </tr>

                                             </tbody>

                                             {{#groupmembers}}
                                                    <tbody class = "table-striped collapse" id ="group-members-{{groupid}}">
                                                            <tr data-student-id = "{{student-id}}" data-student-email="{{student-email}}" student-group-id="{{groupid}}" student-name="{{fullname}}">
                                                                <td class="pic-name">{{{picture}}}</td>
                                                                <td class="status-link-column invisible">{{{link}}}</td>
                                                                <td class="status-link-column invisible">{{{status}}}</td>
                                                            </tr>
                                                    </tbody>
                                            {{/groupmembers}}


                                     </table>
                                    {{/grouping_members}}
                                {{! Groups table finishes }}
                            </td>
                        </tr>

                </tbody>
            {{/groupings}}
    </table> {{ ! Grouping table finishes}}
{{/file_details}}
</div>
