{"version":3,"sources":["../src/submit_control.js"],"names":["define","$","Ajax","Log","init","fileid","instanceid","groupid","email","on","replaceWith","call","methodname","args","done","response","debug","recordid","fail","reason","error"],"mappings":"AA4BAA,OAAM,iCAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,UAAxB,CAAD,CAAsC,SAAUC,CAAV,CAAaC,CAAb,CAAmBC,CAAnB,CAAwB,CAChE,GAAIC,CAAAA,CAAI,CAAG,QAAPA,CAAAA,IAAO,CAAUC,CAAV,CAAkBC,CAAlB,CAA8BC,CAA9B,CAAuCC,CAAvC,CAA8C,CAErDP,CAAC,CAAC,oBAAsBI,CAAvB,CAAD,CAAgCI,EAAhC,CAAmC,OAAnC,CAA4C,UAAY,CACpDR,CAAC,CAAC,oBAAsBI,CAAvB,CAAD,CAAgCK,WAAhC,CAA4C,uBAAyBL,CAAzB,wCAA5C,EAEAH,CAAI,CAACS,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,oCADL,CAEHC,IAAI,CAAE,CACER,MAAM,CAAEA,CADV,CAEEC,UAAU,CAAEA,CAFd,CAGEC,OAAO,CAAEA,CAHX,CAIEC,KAAK,CAAEA,CAJT,CAFH,CAQHM,IAAI,CAAE,cAAUC,CAAV,CAAoB,CAClBZ,CAAG,CAACa,KAAJ,CAAU,oCAAV,EACA,GAAyB,IAArB,EAAAD,CAAQ,CAACE,QAAb,CAA+B,CAC3BhB,CAAC,CAAC,kBAAoBI,CAArB,CAAD,CACIK,WADJ,CACgB,6DADhB,CAEH,CAHD,IAGM,CACFT,CAAC,CAAC,kBAAoBI,CAArB,CAAD,CACIK,WADJ,CACgB,wEADhB,CAEH,CACGP,CAAG,CAACa,KAAJ,CAAUD,CAAV,CACH,CAlBN,CAmBHG,IAAI,CAAE,cAAUC,CAAV,CAAkB,CAChBhB,CAAG,CAACiB,KAAJ,CAAUD,CAAV,CACC,CArBN,CAAD,CAAV,CAuBH,CA1BD,CA2BH,CA7BD,CA+BA,MAAO,CACHf,IAAI,CAAE,cAAUC,CAAV,CAAkBC,CAAlB,CAA8BC,CAA9B,CAAuCC,CAAvC,CAA8C,CAChDJ,CAAI,CAACC,CAAD,CAASC,CAAT,CAAqBC,CAArB,CAA8BC,CAA9B,CACP,CAHE,CAKV,CArCK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Provides the mod_googledocs/submit_control\n *\n * @package   mod_googledocs\n * @category  output\n * @copyright 2020 Veronica Bermegui\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * @module mod_googledocs/submit_controls\n */\n\ndefine(['jquery', 'core/ajax', 'core/log'], function ($, Ajax, Log) {\n    var init = function (fileid, instanceid, groupid, email) {\n\n        $(\"button#submitbtn_\" + fileid).on('click', function () {\n            $('button#submitbtn_' + fileid).replaceWith(\"<div id='submitting_\" + fileid + \"'\"\n            + \"class ='spinner-border color'></div>\");\n            Ajax.call([{\n                methodname: 'mod_googledocs_submit_student_file',\n                    args: {\n                            fileid: fileid,\n                            instanceid: instanceid,\n                            groupid: groupid,\n                            email: email\n                            },\n                    done: function (response) {\n                            Log.debug('mod_googledocs_submit_student_file');\n                            if (response.recordid != null) {\n                                $('div#submitting_' + fileid).\n                                    replaceWith(\"<h4><span class='badge badge-primary'>Submitted</span></h4>\");\n                            } else{\n                                $('div#submitting_' + fileid).\n                                    replaceWith(\"<p><span class='alert alert-danger'>Please try again later.</span></p>\");\n                            }\n                                Log.debug(response);\n                            },\n                    fail: function (reason) {\n                            Log.error(reason);\n                            }\n            }]);\n        });\n    };\n\n    return {\n        init: function (fileid, instanceid, groupid, email) {\n            init(fileid, instanceid, groupid, email);\n        }\n    };\n});"],"file":"submit_control.min.js"}