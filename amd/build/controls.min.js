define ("mod_googledocs/controls",["jquery","core/log","core/ajax"],function(a,b,c){'use strict';function d(a,b,c){var d=this;d.parentfile_id=b;d.saveAndDisplay=a;d.create=c}d.prototype.main=function(){var a=this;a.processingMessageDisplay(a.saveAndReturn);if(!a.create){a.callService()}else{a.initTags()}};d.prototype.initTags=function(){var b=this;a("tbody").children().each(function(c){if("#"!=a("#link_file_"+c).attr("href")){b.tagDisplay(c,!0)}else{b.tagDisplay(c,!1)}})};d.prototype.tagDisplay=function(b,c){if(!0===c){a("#file_"+b).html("Created");a("#file_"+b).addClass("tag_doc success")}else{a("#file_"+b).html("Failed");a("#file_"+b).addClass("tag_doc failed")}};d.prototype.processingMessageDisplay=function(b){a(b).on("click",function(){a("<div class='d-flex flex-column align-items-center justify-content-center overlay'><div class='spinner-border processing' role='status'><span class='sr-only'>Loading...</span></div></div></div>").appendTo("#page-content")})};d.prototype.callService=function(){var b=this;a("tbody").children().each(function(c){var d=a(this).find("#file_"+c).attr("data-student-id");if("undefined"!=typeof d){var e=a(this).find("#file_"+c).attr("data-student-email"),f=a(this).find("a#fullname_"+d).html();b.create_student_file(c,d,e,f)}})};d.prototype.create_student_file=function(d,e,f,g){var h=this;a("#file_"+d).addClass("progress_bar processing");c.call([{methodname:"mod_googledocs_create_students_file",args:{parentfile_id:h.parentfile_id,student_email:f,student_name:g,student_id:e},done:function done(c){b.debug(c.url);var e=a("#link_file_"+d);a(e).attr("href",c.url);a("#file_"+d).removeClass("progress_bar processing");h.tagDisplay(d,!0)},fail:function fail(c){b.error(c);a("#file_"+d).removeClass("progress_bar  processing");h.tagDisplay(d,!1)}}])};return{init:function(c){b.debug("mod_googledocs/control: initializing controls of the mod_googledocs");var e=a("table.overviewTable").attr("data-googledoc-id"),f=new d("#id_submitbutton",e,c);f.main()}}});
//# sourceMappingURL=controls.min.js.map
